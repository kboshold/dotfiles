{{- /* Checks if running interactively */ -}}
{{- $interactive := stdinIsATTY -}}

{{- /* Template file for chezmoi config file */ -}}
{{- $decrypt_data := false -}}{{- /* true if this machine should decrypt data */ -}}

{{- if hasKey . "decrypt_data" -}}
{{-   $decrypt_data = .decrypt_data -}}
{{- else if $interactive -}}
{{-   $decrypt_data = promptBool "Decrypt data?" -}}
{{- end -}}

{{- if $interactive -}}
{{-   writeToStdout "ðŸ’¡ Tip: you can re-enter your data with `chezmoi init --data=false`.\n" -}}
{{- end -}}

data:
    decrypt_data: {{ $decrypt_data }}

format: yaml

{{- if $decrypt_data }}
encryption: age
age:
    identity: {{ .chezmoi.sourceDir }}/key.txt
    recipient: age12xj4kwr50r6rgdtmndlwznd2smeey08hyj85atwakgrl2w7dx3gq809dj3
{{- end }}

merge:
    command: nvim

git:
    autoAdd: true