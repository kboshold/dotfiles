source "$HOME/.cargo/env"

# If not running interactively, dont do anything
[[ $- != *i* ]] && return

# Check if zellij or tmux should be used as terminal mutiplexer
if [ -n "$PS1" ] && [[ ! "$TERM" =~ screen ]] && [[ ! "$TERM" =~ tmux ]] && [ -z "$TMUX" ] && [ -z "$ZELLIJ" ]; then

  ZELLIJ_AUTO_ATTACH=true
  return
  # Use Zellij over tmux if possible
  if [[ "$ZELLIJ_AUTO_ATTACH" == "true" ]]; then
    zellij attach -c zellij && exit
  else
    zellij && exit
  fi

  # Fallback: tmux
  if command -v tmux &> /dev/null; then
    exec tmux
  fi
fi

export PATH=$PATH:$HOME/.local/bin

# Start starship
# eval "$(starship init bash)"
eval "$(oh-my-posh init bash --config ~/.config/oh-my-posh/config.json)"
